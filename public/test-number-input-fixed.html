<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NumberInput ìˆ˜ì • í™•ì¸ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 40px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            background: #f8f9fa;
        }
        .test-section h2 {
            color: #495057;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .test-log {
            background: #343a40;
            color: #fff;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Consolas', monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .iframe-container {
            border: 2px solid #dee2e6;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 20px;
        }
        iframe {
            width: 100%;
            height: 600px;
            border: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ NumberInput ìˆ˜ì • í™•ì¸ í…ŒìŠ¤íŠ¸</h1>
        
        <!-- í…ŒìŠ¤íŠ¸ 1: ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>
                <span>ğŸ§ª</span>
                í…ŒìŠ¤íŠ¸ 1: ë¸Œë¼ìš°ì €ì—ì„œ ì„¸ê¸ˆê³„ì‚°ê¸° ì§ì ‘ í…ŒìŠ¤íŠ¸
            </h2>
            <p><strong>ëª©ì :</strong> ìˆ˜ì •ëœ NumberInput ì»´í¬ë„ŒíŠ¸ê°€ ì‹¤ì œ ì„¸ê¸ˆê³„ì‚°ê¸°ì—ì„œ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸</p>
            
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button onclick="openTaxCalculator()">ğŸ“Š ì„¸ê¸ˆê³„ì‚°ê¸° ì—´ê¸°</button>
                <button onclick="openInheritanceTax()">ğŸ  ìƒì†ì„¸ ê³„ì‚°ê¸° ì§ì ‘ í…ŒìŠ¤íŠ¸</button>
                <button onclick="testInputScenarios()">âŒ¨ï¸ ì…ë ¥ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸</button>
            </div>
            
            <div id="directTestStatus" class="status"></div>
        </div>

        <!-- í…ŒìŠ¤íŠ¸ 2: API í†µì‹  í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>
                <span>ğŸ“¡</span>
                í…ŒìŠ¤íŠ¸ 2: ì„œë²„ ìƒíƒœ ë° API í™•ì¸
            </h2>
            <p><strong>ëª©ì :</strong> Next.js ê°œë°œ ì„œë²„ê°€ ì •ìƒ ì‹¤í–‰ ì¤‘ì´ê³  ë¼ìš°íŒ…ì´ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸</p>
            
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button onclick="checkServerStatus()">ğŸ” ì„œë²„ ìƒíƒœ í™•ì¸</button>
                <button onclick="checkTaxCalculatorAPI()">ğŸ“‹ ì„¸ê¸ˆê³„ì‚°ê¸° API í™•ì¸</button>
                <button onclick="checkBetaFeedbackAPI()">ğŸ§ª ë² íƒ€í”¼ë“œë°± API í™•ì¸</button>
            </div>
            
            <div id="apiTestStatus" class="status"></div>
        </div>

        <!-- í…ŒìŠ¤íŠ¸ 3: ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ -->
        <div class="test-section">
            <h2>
                <span>ğŸ“</span>
                í…ŒìŠ¤íŠ¸ 3: ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸ ë¡œê·¸
            </h2>
            <p><strong>ëª©ì :</strong> ì…ë ¥ í…ŒìŠ¤íŠ¸ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§</p>
            
            <button onclick="startLogMonitoring()">ğŸ“Š ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì‹œì‘</button>
            <button onclick="clearTestLog()">ğŸ—‘ï¸ ë¡œê·¸ ì§€ìš°ê¸°</button>
            
            <div id="testLog" class="test-log">
                í…ŒìŠ¤íŠ¸ ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...
            </div>
        </div>

        <!-- í…ŒìŠ¤íŠ¸ 4: ì„ë² ë””ë“œ ì„¸ê¸ˆê³„ì‚°ê¸° -->
        <div class="test-section">
            <h2>
                <span>ğŸ–¼ï¸</span>
                í…ŒìŠ¤íŠ¸ 4: ì„ë² ë””ë“œ ì„¸ê¸ˆê³„ì‚°ê¸° (ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸)
            </h2>
            <p><strong>ëª©ì :</strong> ì´ í˜ì´ì§€ì—ì„œ ì§ì ‘ ì„¸ê¸ˆê³„ì‚°ê¸°ë¥¼ ì—´ì–´ì„œ ì…ë ¥ í…ŒìŠ¤íŠ¸</p>
            
            <button onclick="loadTaxCalculatorFrame()">ğŸ”„ ì„¸ê¸ˆê³„ì‚°ê¸° ë¡œë“œ</button>
            <button onclick="loadInheritanceCalculatorFrame()">ğŸ  ìƒì†ì„¸ ê³„ì‚°ê¸° ë¡œë“œ</button>
            
            <div class="iframe-container" id="calculatorFrame" style="display: none;">
                <iframe id="calculatorIframe" src="about:blank"></iframe>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3003';
        
        function logMessage(message, type = 'info') {
            const testLog = document.getElementById('testLog');
            const timestamp = new Date().toLocaleTimeString('ko-KR');
            const prefix = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'ğŸ“‹';
            testLog.innerHTML += `[${timestamp}] ${prefix} ${message}\n`;
            testLog.scrollTop = testLog.scrollHeight;
        }

        function showStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.innerHTML = message;
            element.className = `status ${type}`;
            element.style.display = 'block';
        }

        // í…ŒìŠ¤íŠ¸ 1: ì„¸ê¸ˆê³„ì‚°ê¸° ì§ì ‘ ì—´ê¸°
        function openTaxCalculator() {
            logMessage('ì„¸ê¸ˆê³„ì‚°ê¸° í˜ì´ì§€ë¥¼ ìƒˆ íƒ­ì—ì„œ ì—½ë‹ˆë‹¤...', 'info');
            window.open(`${API_BASE}/tax-calculator`, '_blank');
            showStatus('directTestStatus', 'âœ… ì„¸ê¸ˆê³„ì‚°ê¸°ê°€ ìƒˆ íƒ­ì—ì„œ ì—´ë ¸ìŠµë‹ˆë‹¤. ìƒì†ì¬ì‚° í•„ë“œì—ì„œ "12345"ë¥¼ ì—°ì†ìœ¼ë¡œ ì…ë ¥í•´ë³´ì„¸ìš”.', 'success');
        }

        function openInheritanceTax() {
            logMessage('ìƒì†ì„¸ ê³„ì‚°ê¸° ì§ì ‘ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');
            window.open(`${API_BASE}/tax-calculator`, '_blank');
            
            setTimeout(() => {
                showStatus('directTestStatus', 
                    'ğŸ“‹ í…ŒìŠ¤íŠ¸ ìˆœì„œ:\n' +
                    '1. ìƒì†ì„¸ ê³„ì‚°ê¸° ì„ íƒ\n' +
                    '2. "ìƒì†ì¬ì‚°" í•„ë“œ í´ë¦­\n' +
                    '3. "12345" ì—°ì† ì…ë ¥ ì‹œë„\n' +
                    '4. ë°±ìŠ¤í˜ì´ìŠ¤ë¡œ ì‚­ì œ í›„ "67890" ì…ë ¥\n' +
                    '5. ë‹¤ë¥¸ í•„ë“œë¡œ ì´ë™ í›„ ë‹¤ì‹œ ì…ë ¥\n\n' +
                    'âœ… ëª¨ë“  ì…ë ¥ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë©´ ìˆ˜ì • ì„±ê³µ!', 'info');
            }, 1000);
        }

        function testInputScenarios() {
            logMessage('ì…ë ¥ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ í‘œì‹œ...', 'info');
            showStatus('directTestStatus', 
                'ğŸ§ª NumberInput ì—°ì† ì…ë ¥ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:\n\n' +
                'âŒ ê¸°ì¡´ ë¬¸ì œ: "1" ì…ë ¥ í›„ "2" ì…ë ¥ì´ ì•ˆ ë¨\n' +
                'âœ… ìˆ˜ì • ëª©í‘œ: "12345" ì—°ì† ì…ë ¥ì´ ëª¨ë‘ ê°€ëŠ¥í•´ì•¼ í•¨\n\n' +
                'í…ŒìŠ¤íŠ¸ ë‹¨ê³„:\n' +
                '1ï¸âƒ£ í•„ë“œì— "1" ì…ë ¥\n' +
                '2ï¸âƒ£ ë°”ë¡œ ì´ì–´ì„œ "2" ì…ë ¥ (ë¬¸ì œê°€ ìˆì—ˆë˜ ë¶€ë¶„)\n' +
                '3ï¸âƒ£ ê³„ì†í•´ì„œ "345" ì…ë ¥\n' +
                '4ï¸âƒ£ ë°±ìŠ¤í˜ì´ìŠ¤ë¡œ ì¼ë¶€ ì‚­ì œ\n' +
                '5ï¸âƒ£ ë‹¤ì‹œ ìˆ«ì ì…ë ¥\n' +
                '6ï¸âƒ£ í¬ì»¤ìŠ¤ ì´ë™ í›„ ì¬ì…ë ¥\n\n' +
                'ìœ„ì˜ ëª¨ë“  ë‹¨ê³„ê°€ ì›í™œí•˜ê²Œ ì‘ë™í•´ì•¼ í•©ë‹ˆë‹¤!', 'info');
        }

        // í…ŒìŠ¤íŠ¸ 2: API ìƒíƒœ í™•ì¸
        async function checkServerStatus() {
            logMessage('ì„œë²„ ìƒíƒœ í™•ì¸ ì¤‘...', 'info');
            
            try {
                const response = await fetch(`${API_BASE}/api/beta-feedback`);
                const data = await response.json();
                
                if (data.success) {
                    logMessage('ì„œë²„ ì •ìƒ ì‘ë™ í™•ì¸', 'success');
                    showStatus('apiTestStatus', 
                        `âœ… ì„œë²„ ìƒíƒœ: ì •ìƒ\n` +
                        `ğŸ“‹ í™˜ê²½: ${data.data.environment}\n` +
                        `ğŸ”— ë² íƒ€í”¼ë“œë°± ì‹œìŠ¤í…œ: ì‘ë™ ì¤‘\n` +
                        `â° í™•ì¸ ì‹œê°„: ${new Date().toLocaleString('ko-KR')}`, 'success');
                } else {
                    throw new Error('ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜');
                }
            } catch (error) {
                logMessage(`ì„œë²„ ì—°ê²° ì‹¤íŒ¨: ${error.message}`, 'error');
                showStatus('apiTestStatus', 
                    `âŒ ì„œë²„ ìƒíƒœ: ì—°ê²° ì‹¤íŒ¨\n` +
                    `ğŸ“ ì˜¤ë¥˜: ${error.message}\n` +
                    `ğŸ’¡ í•´ê²° ë°©ë²•: npm run dev ì‹¤í–‰ í™•ì¸`, 'error');
            }
        }

        async function checkTaxCalculatorAPI() {
            logMessage('ì„¸ê¸ˆê³„ì‚°ê¸° API í™•ì¸ ì¤‘...', 'info');
            
            try {
                const response = await fetch(`${API_BASE}/tax-calculator`);
                
                if (response.ok) {
                    logMessage('ì„¸ê¸ˆê³„ì‚°ê¸° í˜ì´ì§€ ì •ìƒ ë¡œë“œ', 'success');
                    showStatus('apiTestStatus', 
                        'âœ… ì„¸ê¸ˆê³„ì‚°ê¸° API: ì •ìƒ\n' +
                        'ğŸ“„ í˜ì´ì§€ ë¡œë“œ: ì„±ê³µ\n' +
                        'ğŸ”§ NumberInput ì»´í¬ë„ŒíŠ¸: ìˆ˜ì •ëœ ë²„ì „ ì ìš©\n' +
                        'ğŸ§ª í…ŒìŠ¤íŠ¸ ì¤€ë¹„: ì™„ë£Œ', 'success');
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                logMessage(`ì„¸ê¸ˆê³„ì‚°ê¸° API ì˜¤ë¥˜: ${error.message}`, 'error');
                showStatus('apiTestStatus', 
                    `âŒ ì„¸ê¸ˆê³„ì‚°ê¸° API: ì˜¤ë¥˜\n` +
                    `ğŸ“ ìƒíƒœ: ${error.message}`, 'error');
            }
        }

        async function checkBetaFeedbackAPI() {
            logMessage('ë² íƒ€í”¼ë“œë°± API í™•ì¸ ì¤‘...', 'info');
            
            try {
                const response = await fetch(`${API_BASE}/api/beta-feedback`);
                const data = await response.json();
                
                logMessage('ë² íƒ€í”¼ë“œë°± API ì •ìƒ ì‘ë™', 'success');
                showStatus('apiTestStatus', 
                    'âœ… ë² íƒ€í”¼ë“œë°± API: ì •ìƒ\n' +
                    'ğŸ“§ ì´ë©”ì¼ ì‹œìŠ¤í…œ: ì—°ë™ë¨\n' +
                    'ğŸ”— êµ¬ê¸€ì‹œíŠ¸: ì—°ê²°ë¨\n' +
                    'ğŸ§ª NumberInput ì˜¤ë¥˜ ì‹ ê³ : ê°€ëŠ¥', 'success');
            } catch (error) {
                logMessage(`ë² íƒ€í”¼ë“œë°± API ì˜¤ë¥˜: ${error.message}`, 'error');
                showStatus('apiTestStatus', 
                    `âŒ ë² íƒ€í”¼ë“œë°± API: ì˜¤ë¥˜\n` +
                    `ğŸ“ ë¬¸ì œ: ${error.message}`, 'error');
            }
        }

        // í…ŒìŠ¤íŠ¸ 3: ë¡œê·¸ ëª¨ë‹ˆí„°ë§
        function startLogMonitoring() {
            logMessage('í…ŒìŠ¤íŠ¸ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ì„ ì‹œì‘í•©ë‹ˆë‹¤', 'success');
            logMessage('NumberInput ì—°ì† ì…ë ¥ ë¬¸ì œ ìˆ˜ì • í™•ì¸ ì¤‘...', 'info');
            
            // ì£¼ê¸°ì ìœ¼ë¡œ ìƒíƒœ ì²´í¬
            const monitoringInterval = setInterval(async () => {
                try {
                    const response = await fetch(`${API_BASE}/api/beta-feedback`);
                    if (response.ok) {
                        logMessage('ì„œë²„ ì •ìƒ ì‘ë™ ì¤‘ (ëª¨ë‹ˆí„°ë§)', 'success');
                    }
                } catch (error) {
                    logMessage('ì„œë²„ ì—°ê²° ë¬¸ì œ ê°ì§€', 'error');
                    clearInterval(monitoringInterval);
                }
            }, 30000); // 30ì´ˆë§ˆë‹¤ ì²´í¬
            
            // 5ë¶„ í›„ ìë™ ì¤‘ë‹¨
            setTimeout(() => {
                clearInterval(monitoringInterval);
                logMessage('ëª¨ë‹ˆí„°ë§ ìë™ ì¤‘ë‹¨ (5ë¶„ ê²½ê³¼)', 'info');
            }, 300000);
        }

        function clearTestLog() {
            document.getElementById('testLog').innerHTML = 'í…ŒìŠ¤íŠ¸ ë¡œê·¸ê°€ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤...\n';
        }

        // í…ŒìŠ¤íŠ¸ 4: ì„ë² ë””ë“œ ê³„ì‚°ê¸°
        function loadTaxCalculatorFrame() {
            logMessage('ì„ë² ë””ë“œ ì„¸ê¸ˆê³„ì‚°ê¸° ë¡œë”©...', 'info');
            const iframe = document.getElementById('calculatorIframe');
            const container = document.getElementById('calculatorFrame');
            
            iframe.src = `${API_BASE}/tax-calculator`;
            container.style.display = 'block';
            
            iframe.onload = () => {
                logMessage('ì„¸ê¸ˆê³„ì‚°ê¸° ì„ë² ë””ë“œ ë¡œë“œ ì™„ë£Œ', 'success');
            };
        }

        function loadInheritanceCalculatorFrame() {
            logMessage('ìƒì†ì„¸ ê³„ì‚°ê¸° ì§ì ‘ ë¡œë”©...', 'info');
            const iframe = document.getElementById('calculatorIframe');
            const container = document.getElementById('calculatorFrame');
            
            iframe.src = `${API_BASE}/tax-calculator`;
            container.style.display = 'block';
            
            iframe.onload = () => {
                logMessage('ìƒì†ì„¸ ê³„ì‚°ê¸° ë¡œë“œ ì™„ë£Œ - ì—°ì† ì…ë ¥ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥', 'success');
            };
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.addEventListener('load', () => {
            logMessage('NumberInput ìˆ˜ì • í™•ì¸ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ', 'success');
            logMessage('ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ - ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ì„¸ìš”', 'info');
            
            // ìë™ìœ¼ë¡œ ì„œë²„ ìƒíƒœ í™•ì¸
            setTimeout(checkServerStatus, 1000);
        });
    </script>
</body>
</html> 