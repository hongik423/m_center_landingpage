/**
 * ğŸ§  M-CENTER AI ì±—ë´‡ í›ˆë ¨ ë° í•™ìŠµ ë°ì´í„° ì—…ë°ì´íŠ¸
 * Google Geminië¥¼ ì‚¬ìš©í•˜ì—¬ ì±—ë´‡ í›ˆë ¨ ì‹œìŠ¤í…œ
 */

const { GoogleGenerativeAI } = require('@google/generative-ai');
const fs = require('fs').promises;
const path = require('path');

// Gemini í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
const gemini = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);

// ğŸ“š M-CENTER ì „ë¬¸ ì§€ì‹ ë² ì´ìŠ¤
const MCENTER_KNOWLEDGE_BASE = {
  services: {
    'business-analysis': {
      name: 'BM ZEN ì‚¬ì—…ë¶„ì„',
      fullDescription: `êµ­ë‚´ ìœ ì¼ì˜ ë…ìì  ë¹„ì¦ˆë‹ˆìŠ¤ëª¨ë¸ ë¶„ì„ í”„ë ˆì„ì›Œí¬ë¡œ, 25ë…„ê°„ì˜ ì»¨ì„¤íŒ… ë…¸í•˜ìš°ë¥¼ ì§‘ì•½í•œ M-CENTERë§Œì˜ ì°¨ë³„í™”ëœ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
      
      í•µì‹¬ íŠ¹ì§•:
      - Business Model Canvasì˜ 9ê°œ í•µì‹¬ìš”ì†Œë¥¼ M-CENTER ë°©ì‹ìœ¼ë¡œ ê³ ë„í™”
      - ìˆ˜ìµëª¨ë¸ ë‹¤ê°í™” ë° ìµœì í™” ì „ëµ ìˆ˜ë¦½
      - ì‹œì¥ë¶„ì„ ê¸°ë°˜ì˜ ë°ì´í„° ì¤‘ì‹¬ ì ‘ê·¼
      - ë‹¨ê³„ë³„ ì‹¤í–‰ê³„íš ë° ì„±ê³¼ ì¸¡ì • ì‹œìŠ¤í…œ
      
      ê²€ì¦ëœ ì„±ê³¼:
      - í‰ê·  ë§¤ì¶œ ì¦ëŒ€ìœ¨: 35% (20-60% ë²”ìœ„)
      - ìˆ˜ìµì„± ê°œì„ : í‰ê·  28%
      - ê³ ê°ë§Œì¡±ë„: 96%
      - ì‚¬ì—… ì§€ì†ê°€ëŠ¥ì„±: 85% ì´ìƒ`,
      
      keywords: ['ì‚¬ì—…ë¶„ì„', 'ë¹„ì¦ˆë‹ˆìŠ¤ëª¨ë¸', 'BM', 'ìˆ˜ìµêµ¬ì¡°', 'ë§¤ì¶œì¦ëŒ€', 'ê²½ì˜ì§„ë‹¨'],
      
      caseStudies: [
        'ì œì¡°ì—… Aì‚¬: BM ZEN ì ìš© í›„ ë§¤ì¶œ 45% ì¦ê°€, ìˆ˜ìµë¥  35% ê°œì„ ',
        'IT ì„œë¹„ìŠ¤ Bì‚¬: ì‹ ê·œ ìˆ˜ìµëª¨ë¸ ê°œë°œë¡œ ì—°ë§¤ì¶œ 25ì–µ ë‹¬ì„±',
        'ìœ í†µì—… Cì‚¬: ì˜¨ì˜¤í”„ë¼ì¸ í†µí•© BMìœ¼ë¡œ ì‹œì¥ì ìœ ìœ¨ 3ë°° í™•ëŒ€'
      ],
      
      process: [
        'í˜„ì¬ ë¹„ì¦ˆë‹ˆìŠ¤ëª¨ë¸ ì§„ë‹¨ ë° ë¶„ì„',
        'ì‹œì¥í™˜ê²½ ë° ê²½ìŸì‚¬ ë²¤ì¹˜ë§ˆí‚¹',
        'ìˆ˜ìµëª¨ë¸ ì¬ì„¤ê³„ ë° ìµœì í™”',
        'ì‹¤í–‰ê³„íš ìˆ˜ë¦½ ë° ë‹¨ê³„ë³„ ë¡œë“œë§µ',
        'ì„±ê³¼ ëª¨ë‹ˆí„°ë§ ë° ì§€ì† ê°œì„ '
      ]
    },
    
    'ai-productivity': {
      name: 'AI í™œìš© ìƒì‚°ì„±í–¥ìƒ',
      fullDescription: `AI ê¸°ìˆ ì„ ì‹¤ë¬´ì— ì§ì ‘ ì ìš©í•˜ì—¬ ì—…ë¬´ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” M-CENTER íŠ¹í™” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
      
      í•µì‹¬ íŠ¹ì§•:
      - ê°œë³„ ê¸°ì—… ë§ì¶¤í˜• AI ë„êµ¬ ì„ ì • ë° ë„ì…
      - ì‹¤ë¬´ì§„ ëŒ€ìƒ 1:1 êµìœ¡ ë° ì§€ì›
      - ROI ì¸¡ì • ê°€ëŠ¥í•œ êµ¬ì²´ì  ì„±ê³¼ ì°½ì¶œ
      - ì§€ì†ì  ì—…ê·¸ë ˆì´ë“œ ë° ìµœì í™” ì§€ì›
      
      ê²€ì¦ëœ ì„±ê³¼:
      - ì—…ë¬´ íš¨ìœ¨ì„±: í‰ê·  47% í–¥ìƒ
      - ì¸ê±´ë¹„ ì ˆê°: 25% ì´ìƒ
      - ì˜ì‚¬ê²°ì • ì†ë„: 3ë°° í–¥ìƒ
      - ê³ ê° ëŒ€ì‘ ì‹œê°„: 60% ë‹¨ì¶•`,
      
      keywords: ['AI', 'ì¸ê³µì§€ëŠ¥', 'ìƒì‚°ì„±', 'íš¨ìœ¨ì„±', 'ìë™í™”', 'ì—…ë¬´ê°œì„ ', 'ë””ì§€í„¸ì „í™˜'],
      
      caseStudies: [
        'ê±´ì„¤ì—… Dì‚¬: AI ê²¬ì  ì‹œìŠ¤í…œìœ¼ë¡œ ê²¬ì ì„œ ì‘ì„± ì‹œê°„ 80% ë‹¨ì¶•',
        'ë§ˆì¼€íŒ…ì—… Eì‚¬: AI ì½˜í…ì¸  ì œì‘ìœ¼ë¡œ ìƒì‚°ì„± 300% í–¥ìƒ',
        'íšŒê³„ë²•ì¸ Fì‚¬: AI ë¬¸ì„œì²˜ë¦¬ë¡œ ì—…ë¬´ íš¨ìœ¨ 5ë°° ì¦ê°€'
      ],
      
      process: [
        'í˜„ì¬ ì—…ë¬´ í”„ë¡œì„¸ìŠ¤ ë¶„ì„',
        'AI ì ìš© í¬ì¸íŠ¸ ë°œêµ´',
        'ë§ì¶¤í˜• AI ë„êµ¬ ì„ ì • ë° ë„ì…',
        'ì‹¤ë¬´ì§„ êµìœ¡ ë° ì ì‘ ì§€ì›',
        'ì„±ê³¼ ì¸¡ì • ë° ì§€ì† ê°œì„ '
      ]
    },
    
    'factory-auction': {
      name: 'ê²½ë§¤í™œìš© ê³µì¥êµ¬ë§¤',
      fullDescription: `25ë…„ê°„ì˜ ë¶€ë™ì‚° ê²½ë§¤ ì „ë¬¸ ë…¸í•˜ìš°ë¡œ ê¸°ì—…ì˜ ê³µì¥ ë° ì‚¬ì—…ì¥ í™•ë³´ ë¹„ìš©ì„ íšê¸°ì ìœ¼ë¡œ ì ˆê°í•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
      ì „êµ­ ê²½ë§¤ ì •ë³´ ë„¤íŠ¸ì›Œí¬ì™€ ë²•ë¬´íŒ€ ì—°ê³„ë¡œ ì•ˆì „í•˜ê³  ìˆ˜ìµì„± ë†’ì€ íˆ¬ìë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.
      
      ì „ë¬¸ ì„œë¹„ìŠ¤:
      - ì „êµ­ ìš°ëŸ‰ ê²½ë§¤ë¬¼ê±´ ë°œêµ´ ë° ì„ ë³„
      - ì •í™•í•œ ì‹œì„¸ ë¶„ì„ ë° íˆ¬ìê°€ì¹˜ í‰ê°€
      - ê¶Œë¦¬ë¶„ì„ ë° ëª…ë„ ê°€ëŠ¥ì„± ì‚¬ì „ ê²€ì¦
      - ë‚™ì°° ì „ëµ ìˆ˜ë¦½ ë° ì…ì°° ì§€ì›
      - ì‚¬í›„ ê´€ë¦¬ (ëª…ë„, ë“±ê¸°, ì‹œì„¤ê°œì„ )
      
      ì°¨ë³„í™” ìš°ìˆ˜ì„±:
      - 25ë…„ ì „ë¬¸ ê²½í—˜, 200ì—¬ ê±´ ì„±ê³µ ì‹¤ì 
      - ì „êµ­ ê²½ë§¤ ì •ë³´ ë…ì  ë„¤íŠ¸ì›Œí¬
      - ë²•ë¬´íŒ€ ì—°ê³„ ì™„ë²½í•œ ë¦¬ìŠ¤í¬ ê´€ë¦¬
      - í‰ê·  30-50% ì‹œì„¸ ëŒ€ë¹„ ì ˆê° íš¨ê³¼`,
      
      keywords: ['ê²½ë§¤', 'ê³µì¥êµ¬ë§¤', 'ë¶€ë™ì‚°', 'íˆ¬ì', 'ê³ ì •ë¹„ì ˆê°', 'ì‚¬ì—…ì¥'],
      
      successStories: [
        'ì œì¡°ì—… Gì‚¬: 15ì–µ ê³µì¥ì„ 9ì–µì— ë‚™ì°°, 6ì–µì›(40%) ì ˆì•½',
        'ë¬¼ë¥˜ì—… Hì‚¬: ìµœì  ì…ì§€ ì°½ê³  30% í• ì¸ ë§¤ì…ìœ¼ë¡œ ì—°ê°„ ì„ëŒ€ë£Œ 3ì–µ ì ˆê°',
        'ì‹í’ˆì—… Iì‚¬: ê²½ë§¤ í†µí•œ ìƒì‚°ì‹œì„¤ í™•ì¥ìœ¼ë¡œ íˆ¬ìë¹„ìš© 50% ì ˆê°'
      ]
    },
    
    'tech-startup': {
      name: 'ê¸°ìˆ ì‚¬ì—…í™”/ì°½ì—…',
      fullDescription: `ê¸°ìˆ  ê¸°ë°˜ ì°½ì—… ë° ì‚¬ì—…í™” ì „ ê³¼ì •ì„ ì§€ì›í•˜ëŠ” ì¢…í•© ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. 
      ì •ë¶€ R&D ê³¼ì œ ì„ ì •ë¥  78% (ì „êµ­ í‰ê·  25% ëŒ€ë¹„ 3ë°°)ì˜ ê²€ì¦ëœ ì „ë¬¸ì„±ìœ¼ë¡œ í™•ì‹¤í•œ ì„±ê³¼ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.
      
      í•µì‹¬ ì„œë¹„ìŠ¤:
      - ì •ë¶€ R&D ê³¼ì œ ê¸°íš ë° ì„ ì • ì§€ì›
      - ê¸°ìˆ ê°€ì¹˜í‰ê°€ ë° IP ì „ëµ ìˆ˜ë¦½
      - ì‚¬ì—…ê³„íšì„œ ì‘ì„± ë° íˆ¬ììœ ì¹˜ ì§€ì›
      - ì‚¬ì—…í™” ì „ëµ ìˆ˜ë¦½ ë° ì‹¤í–‰ ì§€ì›
      
      ì •ë¶€ì§€ì› ì „ë¬¸ ë¶„ì•¼:
      - ì¤‘ì†Œë²¤ì²˜24 (ê¸°ìˆ ê°œë°œ 3-10ì–µ, ì‚¬ì—…í™” 5-20ì–µ)
      - ì‚°ì—…ë¶€ ì‚¬ì—… (R&D 5-50ì–µ, ì‹¤ì¦ 10-100ì–µ)
      - ê³¼ê¸°ë¶€ ì‚¬ì—… (ì°½ì—… 1-5ì–µ, ê¸°ìˆ ì´ì „ 3-15ì–µ)
      - ì§€ìì²´ íŠ¹í™”ì‚¬ì—… (1-10ì–µ, ê¸€ë¡œë²Œì§„ì¶œ 5-30ì–µ)`,
      
      keywords: ['ê¸°ìˆ ì‚¬ì—…í™”', 'ì°½ì—…', 'ì •ë¶€ì§€ì›', 'R&D', 'íˆ¬ììœ ì¹˜', 'ì •ë¶€ê³¼ì œ'],
      
      achievements: [
        'í‰ê·  ì •ë¶€ì§€ì›ê¸ˆ í™•ë³´: 5ì–µì› ì´ìƒ',
        'ê³¼ì œ ì„ ì •ë¥ : 78% (ì—…ê³„í‰ê·  25%)',
        'ì‚¬ì—…í™” ì„±ê³µë¥ : 85%',
        'ëˆ„ì  ì§€ì›ê¸ˆ í™•ë³´: 500ì–µì› ì´ìƒ'
      ]
    },
    
    'certification': {
      name: 'ì¸ì¦ì§€ì›',
      fullDescription: `ISO, ë²¤ì²˜ì¸ì¦, ì´ë…¸ë¹„ì¦ˆ ë“± ê°ì¢… ê¸°ì—… ì¸ì¦ ì·¨ë“ì„ í†µí•´ ì„¸ì œí˜œíƒê³¼ ê²½ìŸë ¥ì„ ë™ì‹œì— í™•ë³´í•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
      ì·¨ë“ë¥  92% (ì—…ê³„ ìµœê³ )ì˜ ê²€ì¦ëœ ë…¸í•˜ìš°ë¡œ í™•ì‹¤í•œ ì¸ì¦ì„ ë³´ì¥í•©ë‹ˆë‹¤.
      
      ì „ë¬¸ ì¸ì¦ ë¶„ì•¼:
      - í’ˆì§ˆê²½ì˜ì‹œìŠ¤í…œ (ISO 9001, ISO 14001, ISO 45001)
      - ì •ë³´ë³´ì•ˆ (ISO 27001, ISMS-P, ê°œì¸ì •ë³´ë³´í˜¸)
      - ê¸°ì—… ì¸ì¦ (ë²¤ì²˜ê¸°ì—…, ì´ë…¸ë¹„ì¦ˆ, ë©”ì¸ë¹„ì¦ˆ)
      - ì—…ì¢…ë³„ íŠ¹í™” ì¸ì¦ (ISO 13485, HACCP ë“±)
      
      ì¸ì¦ ì·¨ë“ í˜œíƒ:
      - ì„¸ì œ í˜œíƒ: ë²•ì¸ì„¸/ì†Œë“ì„¸ ê°ë©´ (ì—°ê°„ ìµœëŒ€ 5ì²œë§Œì›)
      - ê¸ˆìœµ í˜œíƒ: ëŒ€ì¶œ ê¸ˆë¦¬ ìš°ëŒ€, ë³´ì¦ë£Œ í• ì¸
      - ì…ì°° ê°€ì : ê³µê³µì…ì°° ì‹œ ê°€ì  íšë“
      - ë¸Œëœë“œ ê°€ì¹˜: ê³ ê° ì‹ ë¢°ë„ ë° ì‹œì¥ê²½ìŸë ¥ í–¥ìƒ`,
      
      keywords: ['ì¸ì¦', 'ISO', 'ë²¤ì²˜ê¸°ì—…', 'ì´ë…¸ë¹„ì¦ˆ', 'ì„¸ì œí˜œíƒ', 'í’ˆì§ˆì¸ì¦'],
      
      certificationBenefits: [
        'ì—°ê°„ ì„¸ì œí˜œíƒ 3ì²œë§Œì›~5ì²œë§Œì›',
        'ëŒ€ì¶œ ê¸ˆë¦¬ 0.5%~1% ìš°ëŒ€',
        'ê³µê³µì…ì°° 5~10ì  ê°€ì ',
        'ë¸Œëœë“œ ì‹ ë¢°ë„ 300% í–¥ìƒ'
      ]
    },
    
    'website': {
      name: 'ì›¹ì‚¬ì´íŠ¸ êµ¬ì¶•',
      fullDescription: `SEO ìµœì í™”ì™€ ì˜¨ë¼ì¸ ë§ˆì¼€íŒ…ì„ í†µí•©í•œ ë§¤ì¶œ ì¦ëŒ€í˜• ì›¹ì‚¬ì´íŠ¸ êµ¬ì¶• ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
      êµ¬ê¸€ ê²€ìƒ‰ ìƒìœ„ë…¸ì¶œ ë³´ì¥ê³¼ ì˜¨ë¼ì¸ ë¬¸ì˜ 300-500% ì¦ê°€ì˜ ê²€ì¦ëœ ì„±ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
      
      í•µì‹¬ ì„œë¹„ìŠ¤:
      - SEO ìµœì í™” ì›¹ì‚¬ì´íŠ¸ ì„¤ê³„ ë° êµ¬ì¶•
      - ë°˜ì‘í˜• ë””ìì¸ ë° ëª¨ë°”ì¼ ìµœì í™”
      - ì½˜í…ì¸  ë§ˆì¼€íŒ… ì „ëµ ìˆ˜ë¦½
      - ì˜¨ë¼ì¸ ê´‘ê³  í†µí•© ê´€ë¦¬ (êµ¬ê¸€, ë„¤ì´ë²„)
      
      ì°¨ë³„í™” ìš°ìˆ˜ì„±:
      - SEO ì „ë¬¸íŒ€ì˜ ê²€ìƒ‰ì—”ì§„ ìƒìœ„ë…¸ì¶œ ë³´ì¥
      - ì „í™˜ìœ¨(CVR) ìµœì í™” ì „ë¬¸ì„±
      - ì—…ì¢…ë³„ íŠ¹í™” ë””ìì¸ í…œí”Œë¦¿
      - ë§ˆì¼€íŒ… ìë™í™” ì‹œìŠ¤í…œ êµ¬ì¶•`,
      
      keywords: ['ì›¹ì‚¬ì´íŠ¸', 'í™ˆí˜ì´ì§€', 'SEO', 'ì˜¨ë¼ì¸ë§ˆì¼€íŒ…', 'ê²€ìƒ‰ìƒìœ„ë…¸ì¶œ'],
      
      results: [
        'ì˜¨ë¼ì¸ ë¬¸ì˜ 300-500% ì¦ê°€',
        'ë§¤ì¶œ ì§ì ‘ ì—°ê²°ìœ¨ 85%',
        'êµ¬ê¸€ ê²€ìƒ‰ ìƒìœ„ 3í˜ì´ì§€ ì§„ì… ë³´ì¥',
        'ëª¨ë°”ì¼ ìµœì í™” ì™„ë²½ êµ¬í˜„'
      ]
    }
  },
  
  // ğŸ¯ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ì „ë¬¸ ë‹µë³€
  faq: [
    {
      category: 'general',
      question: 'M-CENTERëŠ” ì–´ë–¤ íšŒì‚¬ì¸ê°€ìš”?',
      answer: `M-CENTER(ê¸°ì—…ì˜ë³„ ê²½ì˜ì§€ë„ì„¼í„°)ëŠ” 25ë…„ê°„ ê²€ì¦ëœ ë…¸í•˜ìš°ë¥¼ ë³´ìœ í•œ ëŒ€í•œë¯¼êµ­ ìµœê³  ìˆ˜ì¤€ì˜ ê²½ì˜ì»¨ì„¤íŒ… ì „ë¬¸ê¸°ê´€ì…ë‹ˆë‹¤.

ğŸ† í•µì‹¬ ì°¨ë³„í™” ìš°ìˆ˜ì„±:
â€¢ 25ë…„ ê²½í—˜ì˜ ì´í›„ê²½ ê²½ì˜ì§€ë„ì‚¬ ì§ì ‘ ì»¨ì„¤íŒ…
â€¢ 95% ì´ìƒì˜ ë†’ì€ ì„±ê³µë¥ ê³¼ ê³ ê°ë§Œì¡±ë„
â€¢ ì •ë¶€ì§€ì›ì‚¬ì—… ì „ë¬¸ ê²½ì˜ì§€ë„ì‚¬ (ì„ ì •ë¥  78%)
â€¢ 6ê°€ì§€ í•µì‹¬ ì„œë¹„ìŠ¤ì˜ í†µí•© ì†”ë£¨ì…˜ ì œê³µ

ğŸ¯ ê²€ì¦ëœ ì„±ê³¼:
â€¢ 500ê°œ ê¸°ì—… ì„±ê³µ ì§€ì›
â€¢ ëˆ„ì  ì •ë¶€ì§€ì›ê¸ˆ í™•ë³´ 500ì–µì›
â€¢ í‰ê·  ë§¤ì¶œ ì¦ëŒ€ 35%
â€¢ ê³ ê° ì¬ì˜ë¢°ìœ¨ 85%`
    },
    {
      category: 'service',
      question: 'ì–´ë–¤ ì„œë¹„ìŠ¤ê°€ ìš°ë¦¬ íšŒì‚¬ì— ê°€ì¥ ì í•©í• ê¹Œìš”?',
      answer: `ê¸°ì—…ì˜ í˜„ì¬ ìƒí™©ê³¼ ëª©í‘œì— ë”°ë¼ ìµœì ì˜ ì„œë¹„ìŠ¤ ì¡°í•©ì„ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤:

ğŸ“Š ìƒí™©ë³„ ì¶”ì²œ ì„œë¹„ìŠ¤:
â€¢ ë§¤ì¶œ/ìˆ˜ìµ ê°œì„ ì´ í•„ìš” â†’ BM ZEN ì‚¬ì—…ë¶„ì„
â€¢ ì—…ë¬´ íš¨ìœ¨ì„± í–¥ìƒ í•„ìš” â†’ AI ìƒì‚°ì„±í–¥ìƒ
â€¢ ê³ ì •ë¹„(ì„ëŒ€ë£Œ) ë¶€ë‹´ â†’ ê²½ë§¤í™œìš© ê³µì¥êµ¬ë§¤
â€¢ ê¸°ìˆ ë³´ìœ , ìê¸ˆ í•„ìš” â†’ ê¸°ìˆ ì‚¬ì—…í™”/ì°½ì—…
â€¢ ì„¸ê¸ˆ ë¶€ë‹´ ì™„í™” â†’ ì¸ì¦ì§€ì›
â€¢ ì˜¨ë¼ì¸ ë§¤ì¶œ í™•ëŒ€ â†’ ì›¹ì‚¬ì´íŠ¸ êµ¬ì¶•

ğŸ†“ ì •í™•í•œ ì§„ë‹¨ì„ ìœ„í•œ ë¬´ë£Œ ìƒë‹´ì„ ì œê³µí•©ë‹ˆë‹¤. 
ì „í™”(010-9251-9743) ë˜ëŠ” í˜„ì¥ ë°©ë¬¸ì„ í†µí•´ ë§ì¶¤í˜• ì†”ë£¨ì…˜ì„ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤.`
    },
    {
      category: 'cost',
      question: 'ë¹„ìš©ì€ ì–´ëŠ ì •ë„ ë“œë‚˜ìš”?',
      answer: `ì„œë¹„ìŠ¤ë³„ë¡œ ë‹¤ë¥´ì§€ë§Œ, íˆ¬ì ëŒ€ë¹„ í™•ì‹¤í•œ ROIë¥¼ ë³´ì¥í•˜ëŠ” í•©ë¦¬ì  ê°€ê²© ì •ì±…ì„ ìš´ì˜í•©ë‹ˆë‹¤:

ğŸ’° íˆ¬ì ëŒ€ë¹„ íš¨ê³¼:
â€¢ BM ZEN ì‚¬ì—…ë¶„ì„: íˆ¬ìê¸ˆ ëŒ€ë¹„ 300-800% ROI
â€¢ AI ìƒì‚°ì„±í–¥ìƒ: 3-6ê°œì›” ë‚´ íˆ¬ìë¹„ íšŒìˆ˜
â€¢ ê²½ë§¤ ê³µì¥êµ¬ë§¤: 30-50% ë¶€ë™ì‚°ë¹„ìš© ì ˆê°
â€¢ ì •ë¶€ì§€ì› í™•ë³´: í‰ê·  5ì–µì› ì´ìƒ ì§€ì›ê¸ˆ
â€¢ ì¸ì¦ì§€ì›: ì—°ê°„ 3-5ì²œë§Œì› ì„¸ì œí˜œíƒ
â€¢ ì›¹ì‚¬ì´íŠ¸: ì˜¨ë¼ì¸ ë§¤ì¶œ 3-5ë°° ì¦ê°€
â€¢ ì„¸ê¸ˆê³„ì‚°ê¸°: ì™„ì „ ë¬´ë£Œ ì´ìš©

ğŸ†“ ì²« ìƒë‹´ ë° í˜„í™© ì§„ë‹¨ì€ ì™„ì „ ë¬´ë£Œì…ë‹ˆë‹¤.
êµ¬ì²´ì ì¸ íˆ¬ì ê³„íšì€ ë¬´ë£Œ ìƒë‹´ì„ í†µí•´ ë§ì¶¤í˜•ìœ¼ë¡œ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤.`
    },
    {
      category: 'tax-calculator',
      question: 'ì„¸ê¸ˆê³„ì‚°ê¸°ëŠ” ì–´ë–¤ ê¸°ëŠ¥ì´ ìˆë‚˜ìš”?',
      answer: `ğŸ§® **11ê°œ ì „ë¬¸ ì„¸ê¸ˆê³„ì‚°ê¸°ë¡œ ëª¨ë“  ì„¸ë¬´ ê³„ì‚°ì„ ì •í™•í•˜ê²Œ!**

ğŸ“Š **ê°œì¸ì„¸ê¸ˆ (5ê°œ)**
â€¢ ê·¼ë¡œì†Œë“ì„¸ ê³„ì‚°ê¸° - ì›”ê¸‰, ì—°ë´‰ ì†Œë“ì„¸ ì •í™• ê³„ì‚°
â€¢ ì¢…í•©ì†Œë“ì„¸ ê³„ì‚°ê¸° - ì‚¬ì—…ì†Œë“, ê¸°íƒ€ì†Œë“ í†µí•© ê³„ì‚°  
â€¢ ì–‘ë„ì†Œë“ì„¸ ê³„ì‚°ê¸° - ë¶€ë™ì‚°, ì£¼ì‹ ì–‘ë„ ì‹œ ì„¸ê¸ˆ ê³„ì‚°
â€¢ ìƒì†ì„¸ ê³„ì‚°ê¸° - ìƒì†ì¬ì‚° ì„¸ê¸ˆ ë° ê³µì œ ê³„ì‚°
â€¢ ì¦ì—¬ì„¸ ê³„ì‚°ê¸° - ì¦ì—¬ì¬ì‚° ì„¸ê¸ˆ ë° ê³µì œ ê³„ì‚°

ğŸ¢ **ë²•ì¸ì„¸ê¸ˆ (3ê°œ)**
â€¢ ë²•ì¸ì„¸ ê³„ì‚°ê¸° - ë²•ì¸ ì†Œë“ì„¸ ë° ì§€ë°©ì†Œë“ì„¸ ê³„ì‚°
â€¢ ë¶€ê°€ê°€ì¹˜ì„¸ ê³„ì‚°ê¸° - ë§¤ì¶œ/ë§¤ì… ë¶€ê°€ì„¸ ê³„ì‚°
â€¢ ì›ì²œì§•ìˆ˜ì„¸ ê³„ì‚°ê¸° - ê¸‰ì—¬, ì‚¬ì—…ì†Œë“ ì›ì²œì§•ìˆ˜ ê³„ì‚°

âš¡ **ì „ë¬¸ì„¸ê¸ˆ (3ê°œ)**
â€¢ ê°€ì—…ìƒì†ì„¸ê¸ˆ ê³„ì‚°ê¸° - ê°€ì—…ìŠ¹ê³„ ì‹œ ì„¸ê¸ˆ ìµœì í™”
â€¢ ì£¼ì‹ì´ë™ì„¸ê¸ˆ ê³„ì‚°ê¸° - ì£¼ì‹ ì–‘ë„/ì¦ì—¬ ì„¸ê¸ˆ ê³„ì‚°
â€¢ ê°„ì´ ì¢…í•© ê³„ì‚°ê¸° - í†µí•© ì„¸ë¬´ ê³„ì‚° ë° ë¹„êµ

âœ… **2024ë…„ ìµœì‹  ì„¸ë²• ì™„ë²½ ë°˜ì˜, 100% ì •í™•í•œ ê³„ì‚° ë³´ì¥!**`
    },
    {
      category: 'tax-guide',
      question: 'ì„¸ê¸ˆê³„ì‚°ê¸° ì‚¬ìš©ë²•ì„ ì•Œê³  ì‹¶ì–´ìš”',
      answer: `ğŸ“– **ì„¸ê¸ˆê³„ì‚°ê¸° ì‚¬ìš©ë²• ê°€ì´ë“œ**

ğŸ¯ **ì‚¬ìš© ë°©ë²•**
1. /tax-calculator í˜ì´ì§€ ì ‘ì†
2. í•„ìš”í•œ ê³„ì‚°ê¸° ì„ íƒ (11ê°œ ì¤‘)
3. ì •ë³´ ì…ë ¥ (ì†Œë“, ê³µì œ, ìì‚° ë“±)
4. ì‹¤ì‹œê°„ ê³„ì‚° ê²°ê³¼ í™•ì¸
5. ì ˆì„¸ ë°©ì•ˆ ê°€ì´ë“œ í™•ì¸

ğŸ’¡ **ì •í™•í•œ ê³„ì‚°ì„ ìœ„í•œ íŒ**
â€¢ ì†Œë“ ì •ë³´ëŠ” ì •í™•í•˜ê²Œ ì…ë ¥
â€¢ ê³µì œ í•­ëª© ë¹ ì§ì—†ì´ ì²´í¬
â€¢ íŠ¹ìˆ˜ ìƒí™©ì€ ì „ë¬¸ê°€ ìƒë‹´ ê¶Œì¥

âš ï¸ **ë©´ì±…ì¡°í•­**
â€¢ ë³¸ ê³„ì‚°ê¸°ëŠ” ì°¸ê³ ìš©ì…ë‹ˆë‹¤
â€¢ ì‹¤ì œ ì„¸ë¬´ì‹ ê³  ì‹œ ì „ë¬¸ê°€ ê²€í†  í•„ìˆ˜
â€¢ ë³µì¡í•œ ì„¸ë¬´ëŠ” ì„¸ë¬´ì‚¬ ìƒë‹´ ê¶Œì¥

ğŸ“ **ì„¸ë¬´ ì „ë¬¸ ìƒë‹´: 010-9251-9743**`
    }
  ],
  
  // ğŸ¨ ìƒë‹´ ì‹œë‚˜ë¦¬ì˜¤ë³„ ëŒ€ì‘ ì „ëµ
  consultationScenarios: {
    inquiry: 'ì²« ë¬¸ì˜ ê³ ê°ì—ê²ŒëŠ” M-CENTERì˜ ì°¨ë³„í™”ëœ ìš°ìˆ˜ì„±ì„ ê°•ì¡°í•˜ë©° ì‹ ë¢°ê°ì„ ì¡°ì„±',
    comparison: 'íƒ€ ì—…ì²´ì™€ ë¹„êµ ì‹œ 25ë…„ ê²½í—˜ê³¼ 95% ì„±ê³µë¥  ë“± ê²€ì¦ëœ ì‹¤ì ì„ ê°•ì¡°',
    budget: 'ì˜ˆì‚° ë¬¸ì˜ ì‹œ ROIì™€ íˆ¬ì íšŒìˆ˜ ê¸°ê°„ì„ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œ',
    skeptical: 'ì˜êµ¬ì‹¬ í‘œí˜„ ì‹œ ì‹¤ì œ ì„±ê³µ ì‚¬ë¡€ì™€ ê³ ê° ì¶”ì²œì„œë¥¼ í™œìš©',
    urgent: 'ê¸´ê¸‰ ìƒí™© ì‹œ ì¦‰ì‹œ ëŒ€ì‘ ê°€ëŠ¥í•œ ì „ë¬¸ê°€ ì§ì ‘ ì—°ê²° ì„œë¹„ìŠ¤ ê°•ì¡°'
  },

  // ğŸ¯ M-CENTER 6ëŒ€ í•µì‹¬ ì„œë¹„ìŠ¤
  coreServices: [
    {
      name: 'BM ZEN ì‚¬ì—…ë¶„ì„',
      description: 'êµ­ë‚´ ìœ ì¼ í”„ë ˆì„ì›Œí¬ë¡œ ë§¤ì¶œ 20-40% ì¦ëŒ€ ë³´ì¥',
      keywords: ['ì‚¬ì—…ë¶„ì„', 'ë¹„ì¦ˆë‹ˆìŠ¤ëª¨ë¸', 'ë§¤ì¶œì¦ëŒ€', 'BM ZEN', 'ìˆ˜ìµêµ¬ì¡°'],
      benefits: ['ë§¤ì¶œ 35% í‰ê·  ì¦ê°€', 'ìˆ˜ìµì„± 30% ê°œì„ ', 'ROI 300-800%'],
      process: 'í˜„í™©ë¶„ì„ â†’ ì „ëµìˆ˜ë¦½ â†’ ì‹¤í–‰ê³„íš â†’ ì„±ê³¼ì¸¡ì •',
      price: 'íˆ¬ì ëŒ€ë¹„ 300-800% ROI ë³´ì¥',
      government: 'ê¸°ì—…ì§„ë‹¨ì‚¬ì—…, ê²½ì˜ê°œì„ ì‚¬ì—… ì—°ê³„'
    },
    {
      name: 'AI í™œìš© ìƒì‚°ì„±í–¥ìƒ',
      description: 'ì—…ë¬´íš¨ìœ¨ 40-60% í–¥ìƒ, êµ­ë‚´ TOP 3 ì „ë¬¸ì„±',
      keywords: ['AI', 'ìƒì‚°ì„±', 'ìë™í™”', 'ChatGPT', 'ì—…ë¬´íš¨ìœ¨'],
      benefits: ['ì—…ë¬´íš¨ìœ¨ 50% í–¥ìƒ', 'ì¸ê±´ë¹„ 25% ì ˆê°', 'ì˜ì‚¬ê²°ì • 3ë°° í–¥ìƒ'],
      process: 'í˜„í™©ì§„ë‹¨ â†’ AIë„ì… â†’ êµìœ¡í›ˆë ¨ â†’ ì„±ê³¼ë¶„ì„',
      price: '3-6ê°œì›” ë‚´ íˆ¬ìë¹„ íšŒìˆ˜',
      government: 'AI ë°”ìš°ì²˜ ìµœëŒ€ 2ì²œë§Œì› ì§€ì›'
    },
    {
      name: 'ê²½ë§¤í™œìš© ê³µì¥êµ¬ë§¤',
      description: '25ë…„ ë…¸í•˜ìš°ë¡œ ë¶€ë™ì‚°ë¹„ìš© 30-50% ì ˆê°',
      keywords: ['ê²½ë§¤', 'ê³µì¥êµ¬ë§¤', 'ë¶€ë™ì‚°', 'íˆ¬ì', 'ê³µì¥ì´ì „'],
      benefits: ['ë¶€ë™ì‚°ë¹„ìš© 40% ì ˆê°', 'íˆ¬ììˆ˜ìµ 200-500%', 'ì•ˆì „ë‚™ì°°ë¥  95%'],
      process: 'ë¬¼ê±´ë°œêµ´ â†’ ê°€ì¹˜í‰ê°€ â†’ ë²•ì ê²€í†  â†’ ë‚™ì°°ì§€ì› â†’ ì‚¬í›„ê´€ë¦¬',
      price: '30-50% ë¶€ë™ì‚°ë¹„ìš© ì ˆê°',
      government: 'ì¤‘ì†Œê¸°ì—… ì‹œì„¤ìê¸ˆ ëŒ€ì¶œ ì—°ê³„'
    },
    {
      name: 'ê¸°ìˆ ì‚¬ì—…í™”/ì°½ì—…',
      description: 'ì •ë¶€ê³¼ì œ ì„ ì •ë¥  78%, í‰ê·  5ì–µì› ì§€ì› í™•ë³´',
      keywords: ['ê¸°ìˆ ì‚¬ì—…í™”', 'ì°½ì—…', 'ì •ë¶€ì§€ì›', 'R&D', 'íˆ¬ììœ ì¹˜'],
      benefits: ['í‰ê·  5ì–µì› ì§€ì›', 'ì‚¬ì—…í™” ì„±ê³µë¥  82%', 'íˆ¬ììœ ì¹˜ 65%'],
      process: 'ê¸°ìˆ ì§„ë‹¨ â†’ ê³¼ì œê¸°íš â†’ ì„ ì •ì§€ì› â†’ ì‚¬ì—…ìˆ˜í–‰ â†’ ì‚¬ì—…í™”',
      price: 'ì„ ì • ì‹œê¹Œì§€ ë¬´ë£Œ ì§€ì›',
      government: 'TIPS, ì°½ì—…ë„ì•½íŒ¨í‚¤ì§€, ê¸°ìˆ ë³´ì¦ê¸°ê¸ˆ'
    },
    {
      name: 'ì¸ì¦ì§€ì›',
      description: 'ì·¨ë“ë¥  92% ì—…ê³„ ìµœê³ , ì—°ê°„ 5ì²œë§Œì› ì„¸ì œí˜œíƒ',
      keywords: ['ì¸ì¦', 'ISO', 'ë²¤ì²˜ê¸°ì—…', 'ì—°êµ¬ì†Œ', 'ì„¸ì œí˜œíƒ'],
      benefits: ['ì„¸ì œí˜œíƒ 5ì²œë§Œì›', 'ëŒ€ê¸°ì—… ë‚©í’ˆìê²©', 'ë¸Œëœë“œê°€ì¹˜ 300% í–¥ìƒ'],
      process: 'í˜„í™©ì§„ë‹¨ â†’ ì‹œìŠ¤í…œêµ¬ì¶• â†’ ë¬¸ì„œí™” â†’ êµìœ¡í›ˆë ¨ â†’ ì‹¬ì‚¬ëŒ€ì‘',
      price: 'ì·¨ë“ë¥  92% ë³´ì¥',
      government: 'ë²¤ì²˜ê¸°ì—… í™•ì¸, ì—°êµ¬ì†Œ ì„¤ë¦½ ì§€ì›'
    },
    {
      name: 'ì›¹ì‚¬ì´íŠ¸ êµ¬ì¶•',
      description: 'SEO ìƒìœ„ë…¸ì¶œ ë³´ì¥, ì˜¨ë¼ì¸ ë¬¸ì˜ 300-500% ì¦ê°€',
      keywords: ['ì›¹ì‚¬ì´íŠ¸', 'í™ˆí˜ì´ì§€', 'SEO', 'ì˜¨ë¼ì¸ë§ˆì¼€íŒ…', 'ë””ì§€í„¸ë§ˆì¼€íŒ…'],
      benefits: ['ì˜¨ë¼ì¸ ë¬¸ì˜ 400% ì¦ê°€', 'ë§¤ì¶œì—°ê²°ë¥  85%', 'êµ¬ê¸€ ìƒìœ„ë…¸ì¶œ'],
      process: 'ê¸°íšì„¤ê³„ â†’ ë””ìì¸ â†’ ê°œë°œ â†’ SEOìµœì í™” â†’ ë§ˆì¼€íŒ…',
      price: 'SEO ìƒìœ„ë…¸ì¶œ ë³´ì¥, ì„±ê³¼ ì—†ìœ¼ë©´ í™˜ë¶ˆ',
      government: 'ì˜¨ë¼ì¸ íŒë¡œê°œì²™, ë””ì§€í„¸ ë°”ìš°ì²˜ ì—°ê³„'
    },
    {
      name: 'ì „ë¬¸ ì„¸ê¸ˆê³„ì‚°ê¸°',
      description: '11ê°œ ê³„ì‚°ê¸° ì™„ë¹„, 2024ë…„ ìµœì‹  ì„¸ë²• ë°˜ì˜',
      keywords: ['ì„¸ê¸ˆê³„ì‚°ê¸°', 'ì„¸ë¬´', 'ì†Œë“ì„¸', 'ë²•ì¸ì„¸', 'ë¶€ê°€ê°€ì¹˜ì„¸', 'ìƒì†ì„¸', 'ì¦ì—¬ì„¸', 'ì–‘ë„ì†Œë“ì„¸'],
      benefits: ['100% ì •í™•í•œ ê³„ì‚°', '3ì´ˆ ë‚´ ê³„ì‚° ì™„ë£Œ', 'ì ˆì„¸ ë°©ì•ˆ ì œì•ˆ', 'ì „ë¬¸ê°€ ìˆ˜ì¤€ ë¶„ì„'],
      process: 'ì •ë³´ì…ë ¥ â†’ ì‹¤ì‹œê°„ê³„ì‚° â†’ ê²°ê³¼ë¶„ì„ â†’ ì ˆì„¸ê°€ì´ë“œ â†’ ì „ë¬¸ê°€ìƒë‹´',
      price: 'ì™„ì „ ë¬´ë£Œ ì´ìš©',
      government: 'ì„¸ë¬´ì‹ ê³  ì§€ì›, ì ˆì„¸ ì»¨ì„¤íŒ… ì—°ê³„'
    }
  ]
};

// ğŸ¯ í›ˆë ¨ ë°ì´í„° ìƒì„±ì„ ìœ„í•œ ì§ˆë¬¸ í…œí”Œë¦¿
const trainingPrompts = [
  "M-CENTERì˜ ì£¼ìš” ì„œë¹„ìŠ¤ëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
  "BM ZEN ì‚¬ì—…ë¶„ì„ì´ ë‹¤ë¥¸ ì»¨ì„¤íŒ…ê³¼ ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€ìš”?",
  "AI ìƒì‚°ì„±í–¥ìƒ ì„œë¹„ìŠ¤ì˜ êµ¬ì²´ì ì¸ íš¨ê³¼ëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
  "ìš°ë¦¬ íšŒì‚¬ì— ë§ëŠ” M-CENTER ì„œë¹„ìŠ¤ë¥¼ ì¶”ì²œí•´ì£¼ì„¸ìš”",
  "M-CENTERì˜ ì„±ê³µ ì‚¬ë¡€ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”",
  "ìƒë‹´ì„ ë°›ìœ¼ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?",
  "ë¹„ìš©ì€ ì–¼ë§ˆë‚˜ ë“œë‚˜ìš”?",
  "ì •ë¶€ ì§€ì›ê¸ˆì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",
  "ì„œë¹„ìŠ¤ ì§„í–‰ ê¸°ê°„ì€ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?",
  "M-CENTERê°€ ë‹¤ë¥¸ ì»¨ì„¤íŒ… íšŒì‚¬ì™€ ë‹¤ë¥¸ ì ì€?",
  "ë¬´ë£Œ ìƒë‹´ì´ë‚˜ ì§„ë‹¨ì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",
  "ì‘ì€ íšŒì‚¬ë„ ì„œë¹„ìŠ¤ë¥¼ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",
  "ì˜¨ë¼ì¸ìœ¼ë¡œë„ ìƒë‹´ì´ ê°€ëŠ¥í•œê°€ìš”?",
  "M-CENTERì˜ ì „ë¬¸ì„±ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
  "ì‹¤ì œ ì„±ê³¼ë¥¼ ë³´ì¥í•  ìˆ˜ ìˆë‚˜ìš”?"
];

/**
 * ğŸ¤– AI ê¸°ë°˜ í›ˆë ¨ ë°ì´í„° ìƒì„±
 */
async function generateTrainingData() {
  console.log('ğŸš€ M-CENTER AI ì±—ë´‡ í›ˆë ¨ ë°ì´í„° ìƒì„± ì‹œì‘...');
  
  const trainingData = [];
  
  for (const prompt of trainingPrompts) {
    try {
      const model = gemini.getGenerativeModel({ model: 'gemini-2.5-flash' });
      
      const result = await model.generateContent({
        contents: [
          {
            role: 'user',
            parts: [
              {
                text: `ë‹¹ì‹ ì€ M-CENTERì˜ AI ì±—ë´‡ í•™ìŠµ ë°ì´í„°ë¥¼ ìƒì„±í•˜ëŠ” ì „ë¬¸ê°€ì…ë‹ˆë‹¤. 
                25ë…„ ê²½í—˜ì˜ ê²½ì˜ì§€ë„ì‚¬ ìˆ˜ì¤€ì˜ ì „ë¬¸ì„±ìœ¼ë¡œ ê³ í’ˆì§ˆì˜ ì§ˆë¬¸-ë‹µë³€ ìŒì„ ìƒì„±í•´ì£¼ì„¸ìš”.
                
                ë‹µë³€ ì‘ì„± ì‹œ ë°˜ë“œì‹œ í¬í•¨í•  ìš”ì†Œ:
                1. M-CENTERì˜ ì°¨ë³„í™”ëœ ìš°ìˆ˜ì„± ê°•ì¡°
                2. êµ¬ì²´ì ì¸ ì„±ê³¼ ìˆ˜ì¹˜ì™€ ì‹¤ì 
                3. ê³ ê°ì˜ ì¦‰ì‹œ í–‰ë™ì„ ìœ ë„í•˜ëŠ” CTA
                4. ì „ë¬¸ê°€ ì§ì ‘ ì—°ê²° ì •ë³´ (010-9251-9743)
                
                ì§ˆë¬¸: ${prompt}`
              }
            ]
          }
        ],
        generationConfig: {
          maxOutputTokens: 4000, // 2000ì í›ˆë ¨ ë‹µë³€ì„ ìœ„í•´ 4000 í† í°ìœ¼ë¡œ í™•ëŒ€
          temperature: 0.8,
          topP: 0.9,
          topK: 40,
        },
      });
      
      const response = await result.response;
      
      trainingData.push({
        prompt: prompt,
        response: response.text(),
        timestamp: new Date().toISOString()
      });
      
      // API í˜¸ì¶œ ê°„ê²© ì¡°ì ˆ
      await new Promise(resolve => setTimeout(resolve, 1000));
      
    } catch (error) {
      console.error('í•™ìŠµ ë°ì´í„° ìƒì„± ì‹¤íŒ¨:', error);
    }
  }
  
  return trainingData;
}

/**
 * ğŸ“Š í›ˆë ¨ ë°ì´í„°ë¥¼ íŒŒì¼ë¡œ ì €ì¥
 */
async function saveTrainingData(data) {
  try {
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    const filename = `m-center-training-data-${timestamp}.json`;
    const filepath = path.join(__dirname, '../docs', filename);
    
    await fs.writeFile(filepath, JSON.stringify(data, null, 2), 'utf8');
    
    console.log(`âœ… í›ˆë ¨ ë°ì´í„° ì €ì¥ ì™„ë£Œ: ${filename}`);
    console.log(`ğŸ“ ì €ì¥ ìœ„ì¹˜: ${filepath}`);
    console.log(`ğŸ“Š ìƒì„±ëœ ë°ì´í„° ìˆ˜: ${data.length}ê°œ`);
    
  } catch (error) {
    console.error('âŒ í›ˆë ¨ ë°ì´í„° ì €ì¥ ì‹¤íŒ¨:', error);
  }
}

/**
 * ğŸ§  ì±—ë´‡ ì„±ëŠ¥ ë¶„ì„
 */
async function analyzeChatbotPerformance() {
  console.log('ğŸ“Š AI ì±—ë´‡ ì„±ëŠ¥ ë¶„ì„ ì¤‘...');
  
  const testQuestions = [
    "M-CENTERëŠ” ì–´ë–¤ íšŒì‚¬ì¸ê°€ìš”?",
    "ìš°ë¦¬ íšŒì‚¬ì— ë§ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì¶”ì²œí•´ì£¼ì„¸ìš”",
    "BM ZENì´ ë­”ê°€ìš”?",
    "AI ë„ì… íš¨ê³¼ëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
    "ë¹„ìš©ì€ ì–¼ë§ˆë‚˜ ë“œë‚˜ìš”?",
    "ì •ë¶€ì§€ì›ê¸ˆì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",
    "ë¬´ë£Œ ìƒë‹´ì„ ë°›ê³  ì‹¶ìŠµë‹ˆë‹¤"
  ];
  
  const analysisPrompt = `ë‹¤ìŒ ì§ˆë¬¸ë“¤ì— ëŒ€í•œ M-CENTER AI ì±—ë´‡ì˜ ì‘ë‹µ í’ˆì§ˆì„ ë¶„ì„í•˜ê³  ê°œì„  ë°©ì•ˆì„ ì œì‹œí•´ì£¼ì„¸ìš”:

ì§ˆë¬¸ ëª©ë¡: ${testQuestions.join(', ')}

ë¶„ì„ ê¸°ì¤€:
1. ì „ë¬¸ì„±: 25ë…„ ê²½ì˜ì§€ë„ì‚¬ ìˆ˜ì¤€ì˜ ê¹Šì´
2. ì°¨ë³„í™”: M-CENTERë§Œì˜ ìš°ìˆ˜ì„± ê°•ì¡°
3. ì‹ ë¢°ì„±: êµ¬ì²´ì  ìˆ˜ì¹˜ì™€ ì‹¤ì  ì œì‹œ
4. í–‰ë™ìœ ë„: ê³ ê°ì˜ ì¦‰ì‹œ ìƒë‹´ ì‹ ì²­ ìœ ë„
5. ì™„ì „ì„±: ì§ˆë¬¸ì— ëŒ€í•œ ì™„ë²½í•œ ë‹µë³€

ê° ê¸°ì¤€ë³„ë¡œ ì ìˆ˜(1-10)ì™€ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•´ì£¼ì„¸ìš”.`;

  try {
    const model = gemini.getGenerativeModel({ model: 'gemini-2.5-flash' });
    
    const result = await model.generateContent({
      contents: [
        {
          role: 'user',
          parts: [{ text: analysisPrompt }]
        }
      ],
      generationConfig: {
        maxOutputTokens: 4000, // 2000ì ì„±ëŠ¥ ë¶„ì„ì„ ìœ„í•´ 4000 í† í°ìœ¼ë¡œ í™•ëŒ€
        temperature: 0.6,
        topP: 0.9,
        topK: 40,
      },
    });
    
    const response = await result.response;
    return response.text();
  } catch (error) {
    console.error('ì„±ëŠ¥ ë¶„ì„ ì‹¤íŒ¨:', error);
    return 'ì„±ëŠ¥ ë¶„ì„ì„ ì™„ë£Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
  }
}

/**
 * ğŸ“ˆ ì„±ê³¼ ë³´ê³ ì„œ ìƒì„±
 */
async function generatePerformanceReport(analysis) {
  const timestamp = new Date().toISOString();
  
  const report = {
    title: 'M-CENTER AI ì±—ë´‡ ì„±ëŠ¥ ë¶„ì„ ë³´ê³ ì„œ',
    generatedAt: timestamp,
    analysis: analysis,
    recommendations: [
      'ì§€ì†ì ì¸ ì‹¤ì œ ëŒ€í™” ë°ì´í„°ë¥¼ í†µí•œ í•™ìŠµ ê°œì„ ',
      'M-CENTER íŠ¹í™” ì§€ì‹ ë² ì´ìŠ¤ í™•ì¥',
      'ê³ ê° ë§Œì¡±ë„ ì¸¡ì • ì‹œìŠ¤í…œ êµ¬ì¶•',
      'ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë„êµ¬ ë„ì…'
    ],
    nextSteps: [
      'ì›”ê°„ ì„±ëŠ¥ ë¦¬ë·° ë° ì—…ë°ì´íŠ¸',
      'ê³ ê° í”¼ë“œë°± ìˆ˜ì§‘ ë° ë°˜ì˜',
      'ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì •ë³´ ì¶”ê°€',
      'AI ëª¨ë¸ ìµœì í™” ë° ì—…ê·¸ë ˆì´ë“œ'
    ]
  };
  
  try {
    const filename = `chatbot-performance-report-${timestamp.split('T')[0]}.json`;
    const filepath = path.join(__dirname, '../docs', filename);
    
    await fs.writeFile(filepath, JSON.stringify(report, null, 2), 'utf8');
    
    console.log(`ğŸ“Š ì„±ê³¼ ë³´ê³ ì„œ ìƒì„± ì™„ë£Œ: ${filename}`);
    return report;
    
  } catch (error) {
    console.error('ì„±ê³¼ ë³´ê³ ì„œ ìƒì„± ì‹¤íŒ¨:', error);
    return null;
  }
}

/**
 * ğŸš€ ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜
 */
async function main() {
  try {
    console.log('ğŸ¤– M-CENTER AI ì±—ë´‡ í›ˆë ¨ ì‹œìŠ¤í…œ ì‹œì‘');
    console.log('â° ì‹œì‘ ì‹œê°„:', new Date().toISOString());
    
    // 1. í›ˆë ¨ ë°ì´í„° ìƒì„±
    const trainingData = await generateTrainingData();
    
    // 2. í›ˆë ¨ ë°ì´í„° ì €ì¥
    await saveTrainingData(trainingData);
    
    // 3. ì„±ëŠ¥ ë¶„ì„
    const performanceAnalysis = await analyzeChatbotPerformance();
    
    // 4. ì„±ê³¼ ë³´ê³ ì„œ ìƒì„±
    const report = await generatePerformanceReport(performanceAnalysis);
    
    console.log('âœ… M-CENTER AI ì±—ë´‡ í›ˆë ¨ ì™„ë£Œ');
    console.log('ğŸ“Š ìƒì„±ëœ í›ˆë ¨ ë°ì´í„°:', trainingData.length, 'ê°œ');
    console.log('â° ì™„ë£Œ ì‹œê°„:', new Date().toISOString());
    
  } catch (error) {
    console.error('âŒ AI ì±—ë´‡ í›ˆë ¨ ì‹¤íŒ¨:', error);
    process.exit(1);
  }
}

// ìŠ¤í¬ë¦½íŠ¸ ì§ì ‘ ì‹¤í–‰ ì‹œ ë©”ì¸ í•¨ìˆ˜ í˜¸ì¶œ
if (require.main === module) {
  main();
}

module.exports = {
  generateTrainingData,
  saveTrainingData,
  analyzeChatbotPerformance,
  generatePerformanceReport,
  MCENTER_KNOWLEDGE_BASE
}; 